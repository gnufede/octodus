{% from "macros/_misc.html" import render_input, render_action %}

{% set page_title = _('Nueva Universidad') %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/jqtree.css') }}">

{% extends 'layout.html' %}

{% block body %}
<div class='span4' id="tree1"></div>
<div class='span8'>
    <form class='form-stacked' method="POST" action="{{ url_for('admin.new_group') }}">
        {{ form.hidden_tag() }}
        {{ form.next }}
       

        <fieldset>
             {{ render_input(form.name, 'xlarge', value=node.name) }}
             {{ render_input(form.type, 'xlarge') }}
             {{ render_input(form.activation_key, 'xlarge', value=node.activation_key) }}
             {{ render_input(form.choosetype, 'xlarge', value = node.type) }}
             
             {{ render_action(form.submit) }}
        </fieldset>
    </form>
</div>
{% endblock %}

{% block append_js %}
<script async src="{{ url_for('static', filename='js/libs/tree.jquery.js') }}"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $.getJSON('/admin/groups', function(data) {
            var data_array = [];
            for (var key in data) {
                data_array.push(data[key]);
            }
            $('#tree1').tree({
                selectable: true,
                data: data_array
            });
        });
        //var node = $tree.tree('getselectednode');
    });
</script>
{% endblock %}

